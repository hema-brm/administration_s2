{% set id = id|default(uniqid()) %}
{% set attach_to = attach_to|default('#') %}
{% set no_close_button = no_close_button is defined ? no_close_button : false %}

<div id="{{ id }}" class="hidden fixed top-0 left-0 z-[99999] bg-black bg-opacity-50 w-full h-full items-center justify-center">
    <div class="bg-white p-5 text-center text-gray-900 relative shadow-2xl rounded-sm transition-all transform">
        {% if not no_close_button %}
            <button id="close-modal-{{ id }}" class="flex absolute top-0 right-0 m-2 text-gray-500">
                <i class="fa-solid fa-times"></i>
            </button>
        {% endif %}
        {% block content %}{% endblock %}
    </div>
</div>

{# Default script #}
<script>
    const button = document.querySelector('#{{ attach_to }}');
    const modal = document.querySelector('#{{ id }}');

    button.addEventListener('click', (e) => {
        e.preventDefault();
        modal.classList.add('flex');
        modal.classList.remove('hidden');
    });

    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
    });

    {% if not no_close_button %}
        const closeButtons = document.querySelectorAll('#close-modal-{{ id }}');
        closeButtons.forEach((closeButton) => {
            closeButton.addEventListener('click', () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            });
        });
    {% endif %}
</script>

{# Additionnal script if needed #}
{% block script %}{% endblock %}